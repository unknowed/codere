!function(t,a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common","./grid.filter"],function(e){return a(e,t,t.document)}):"object"==typeof module&&module.exports?module.exports=function(e,t){return e||(e=window),void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),require("./grid.base"),require("./jquery.fmatter"),require("./grid.common"),require("./grid.filter"),a(t,e,e.document),t}:a(jQuery,t,t.document)}("undefined"!=typeof window?window:this,function(re,U,H){"use strict";var oe=re.jgrid,le=oe.jqID,ne=re.fn.jqGrid,de=ne.getGuiStyles,se=oe.mergeCssClasses,ce=oe.hasOneFromClasses,ue=oe.feedback,E=oe.fullBoolFeedback,pe=oe.builderFmButon,fe=function(e,t,a){var i;!0===t[0]&&(i="<span class='"+se("fm-button-icon",a,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(i):e.addClass("fm-button-icon-left").prepend(i))},he=function(e){return de.call(this,"states."+e)},me=function(e){e.find("tr[data-rowpos]").each(function(){var e=0;re(this).children("td").each(function(){"hidden"!==re(this).css("visibility")&&e++}),e||re(this).hide()})},ve=function(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)};oe.extend({searchGrid:function(S){return this.each(function(){var o=this,l=re(o),n=o.p;if(o.grid&&null!=n){var d=re.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:n.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},ne.getGridRes.call(l,"search"),oe.search||{},n.searching||{},S||{}),s="fbox_"+n.id,e=d.commonIconClass,a={themodal:"searchmod"+s,modalhead:"searchhd"+s,modalcontent:"searchcnt"+s,resizeAlso:s},t="#"+le(a.themodal),i=n.gBox,r=n.gView,c=re.each,u=n.postData[d.sFilter],p=function(){var e=re.makeArray(arguments);return e.unshift("Search"),e.unshift("Filter"),e.unshift(d),ue.apply(o,e)},f=function(){oe.hideModal(t,{gb:i,jqm:d.jqModal,onClose:d.onClose,removemodal:d.removemodal})};if("string"==typeof u&&(u=""!==re.trim(u)?re.parseJSON(u):void 0),re(t).remove(),void 0!==re(t)[0])_(re("#fbox_"+le(n.id)));else{var h=re("<div><div id='"+s+"' class='"+de.call(o,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(r);"rtl"===n.direction&&h.attr("dir","rtl");var m,v,g="",b="",y=!1,w=-1,x=re.extend([],n.colModel),D=pe.call(o,s+"_search",d.Find,se(e,d.findDialogIcon),"right"),C=pe.call(o,s+"_reset",d.Reset,se(e,d.resetDialogIcon),"left");if(d.showQuery&&(g=pe.call(o,s+"_query","Query",se(e,d.queryDialogIcon),"left")+"&#160;"),d.searchForAdditionalProperties&&c(n.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,x.push(e)}),d.columns.length?(x=d.columns,m=x[w=0].index||x[0].name):c(x,function(e,t){if(t.label||(t.label=t.isAddProp?t.name:n.colNames[e]),!y){var a=void 0===t.search||t.search,i=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&a||a&&!i)&&(y=!0,m=t.index||t.name,w=e)}}),!u&&m||!1===d.multipleSearch){var k="eq";0<=w&&x[w].searchoptions&&x[w].searchoptions.sopt?k=x[w].searchoptions.sopt[0]:d.sopt&&d.sopt.length&&(k=d.sopt[0]),u={groupOp:"AND",rules:[{field:m,op:k,data:""}]}}y=!1,d.tmplNames&&d.tmplNames.length&&(y=!0,b=d.tmplLabel,b+="<select class='ui-template'>",b+="<option value='default'>Default</option>",c(d.tmplNames,function(e,t){b+="<option value='"+e+"'>"+t+"</option>"}),b+="</select>"),v="<div class='"+de.call(o,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+s+"_2'><tbody><tr><td colspan='2'><hr class='"+de.call(o,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+n.direction+"'  style='float:"+("rtl"===n.direction?"right":"left")+";'>"+C+b+"</td><td class='EditButton EditButton-"+n.direction+"'>"+g+D+"</td></tr></tbody></table></div>",s=le(s),d.gbox=i,d.height="auto",re(s="#"+s).jqFilter({columns:x,filter:d.loadDefaults?u:null,showQuery:d.showQuery,errorcheck:d.errorcheck,sopt:d.sopt,groupButton:d.multipleGroup,ruleButtons:d.multipleSearch,afterRedraw:d.afterRedraw,ops:d.odata,cops:n.customSortOperations,operands:d.operands,ajaxSelectOptions:n.ajaxSelectOptions,groupOps:d.groupOps,onChange:function(e,t){e.showQuery&&re(".query",t).text(t.toUserFriendlyString()),E.call(o,d.afterChange,"jqGridFilterAfterChange",re(s),d,e,t)},direction:n.direction,id:n.id}),h.append(v),y&&d.tmplFilters&&d.tmplFilters.length&&re(".ui-template",h).on("change",function(){var e=re(this).val();return"default"===e?re(s).jqFilter("addFilter",u):re(s).jqFilter("addFilter",d.tmplFilters[parseInt(e,10)]),!1}),!0===d.multipleGroup&&(d.multipleSearch=!0),p("onInitialize",re(s)),d.layer?oe.createModal.call(o,a,h,d,r,re(i)[0],"#"+le(d.layer),{position:"relative"}):oe.createModal.call(o,a,h,d,r,re(i)[0]),(d.searchOnEnter||d.closeOnEscape)&&re(t).keydown(function(e){var t=re(e.target);return!d.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?d.closeOnEscape&&27===e.which?(re("#"+le(a.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(re(s+"_search").click(),!1)}),g&&re(s+"_query").on("click",function(){return re(".queryresult",h).toggle(),!1}),void 0===d.stringResult&&(d.stringResult=d.multipleSearch),re(s+"_search").on("click",function(){var e,t={},a="",i=re(s),r=i.find(".input-elm");if(r.filter(":focus")&&(r=r.filter(":focus")),r.change(),e=i.jqFilter("filterData"),d.errorcheck&&(i[0].hideError(),d.showQuery||i.jqFilter("toSQLString"),i[0].p.error))return i[0].showError(),!1;if(d.stringResult||"local"===n.datatype){try{a=JSON.stringify(e)}catch(e){}"string"==typeof a&&(t[d.sFilter]=a,c([d.sField,d.sValue,d.sOper],function(){t[this]=""}))}else d.multipleSearch?(t[d.sFilter]=e,c([d.sField,d.sValue,d.sOper],function(){t[this]=""})):(t[d.sField]=e.rules[0].field,t[d.sValue]=e.rules[0].data,t[d.sOper]=e.rules[0].op,t[d.sFilter]="");return re.extend(n.postData,t),E.call(o,d.onSearch,"jqGridFilterSearch",n.filters)&&(n.search=!0,l.trigger("reloadGrid",[re.extend({page:1},d.reloadGridSearchOptions||{})])),d.closeAfterSearch&&f(),!1}),re(s+"_reset").on("click",function(){var e={},t=re(s);return n.search=!1,!(n.resetsearch=!0)===d.multipleSearch?e[d.sField]=e[d.sValue]=e[d.sOper]="":e[d.sFilter]="",t[0].resetFilter(),y&&re(".ui-template",h).val("default"),re.extend(n.postData,e),E.call(o,d.onReset,"jqGridFilterReset")&&l.trigger("reloadGrid",[re.extend({page:1},d.reloadGridResetOptions||{})]),d.closeAfterReset&&f(),!1}),_(re(s));var F=he.call(o,"hover");re(".fm-button:not(."+he.call(o,"disabled").split(" ").join(".")+")",h).hover(function(){re(this).addClass(F)},function(){re(this).removeClass(F)})}}function _(e){p("beforeShow",e)&&(re(t).data("onClose",d.onClose),oe.viewModal.call(o,t,{gbox:i,jqm:d.jqModal,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass,toTop:d.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),p("afterShow",e))}})},editGridRow:function(ae,ie){return this.each(function(){var E=this,O=re(E),j=E.p;if(E.grid&&null!=j&&ae){var y,w,q=j.id,s=ne.getGridRes,x=ne.setSelection,T=re.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:de.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:s.call(O,"defaults.savetext")||"Saving..."},s.call(O,"edit"),oe.edit,j.formEditing||{},ie||{}),A="FrmGrid_"+q,e=A,t="TblGrid_"+q,D="#"+le(t),C=D+"_2",a={themodal:"editmod"+q,modalhead:"edithd"+q,modalcontent:"editcnt"+q,resizeAlso:A},i="#"+le(a.themodal),r=j.gBox,G=j.colModel,c=j.iColByName,o=1,l=0,n=T.commonIconClass,k=function(){oe.hideModal(i,{gb:r,jqm:T.jqModal,onClose:T.onClose,removemodal:T.removemodal})},u=s.call(O,"errors.errcap"),d=function(){var e=re.makeArray(arguments);return e.unshift(""),e.unshift("AddEdit"),e.unshift(T),ue.apply(E,e)},p=he.call(E,"hover"),I=he.call(E,"disabled"),f=he.call(E,"select"),F=he.call(E,"active"),h=he.call(E,"error");re(i).remove(),A="#"+le(A),"new"===ae?(ae="_empty",w="add",T.caption=T.addCaption):(T.caption=T.editCaption,w="edit");var m=!0;!T.checkOnUpdate||!0!==T.jqModal&&void 0!==T.jqModal||T.modal||(m=!1);var v=isNaN(T.dataheight)?T.dataheight:T.dataheight+"px",g=isNaN(T.datawidth)?T.datawidth:T.datawidth+"px",b=re("<form name='FormPost' id='"+e+"' class='FormGrid' onSubmit='return false;' style='width:"+g+";overflow:auto;position:relative;height:"+v+";'></form>").data("disabled",!1),_=re("<table id='"+t+"' class='EditTable'><tbody></tbody></table>");re(G).each(function(){var e=this.formoptions;o=Math.max(o,e&&e.colpos||0),l=Math.max(l,e&&e.rowpos||0)}),re(b).append(_);var S=re("<tr id='FormError' style='display:none'><td class='"+h+"' colspan='"+2*o+"'>&#160;</td></tr>");if(S[0].rp=0,re(_).append(S),(S=re("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*o+"'>"+(T.topinfo||"&#160;")+"</td></tr>"))[0].rp=0,re(_).append(S),d("beforeInitData",b,w)){!function(){var e=oe.detectRowEditing.call(E,ae);if(null!=e)if("inlineEditing"===e.mode)ne.restoreRow.call(O,ae);else{var t=e.savedRow,a=E.rows[t.id];ne.restoreCell.call(O,t.id,t.ic),re(a.cells[t.ic]).removeClass("edit-cell "+f),re(a).addClass(f).attr({"aria-selected":"true",tabindex:"0"})}}();var N="rtl"===j.direction,B=N?"nData":"pData",P=N?"pData":"nData";!function(x,e,D){var t,C=0,k=[],F=!1,_=re(e),S="";for(t=1;t<=D;t++)S+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";if("_empty"!==x&&(F=ne.getInd.call(O,x)),re(G).each(function(e){var t,a,i,r,o,l=this,n=l.name,d=l.editable,s=!1,c=!1,u="_empty"===x?"addForm":"editForm";switch(re.isFunction(d)&&(d=d.call(E,{rowid:x,iCol:e,iRow:F,cmName:n,cm:l,mode:u})),a=!(l.editrules&&!0===l.editrules.edithidden||!0!==l.hidden&&"hidden"!==d),String(d).toLowerCase()){case"hidden":d=!0;break;case"disabled":s=d=!0;break;case"readonly":c=d=!0}if("cb"!==n&&"subgrid"!==n&&!0===d&&"rn"!==n){if(!1===F)r="";else{t=re(E.rows[F].cells[e]);try{r=re.unformat.call(E,t,{rowId:x,colModel:l},e)}catch(e){r=l.edittype&&"textarea"===l.edittype?t.text():t.html()}ve(r)&&(r="")}var p=re.extend({},l.editoptions||{},{id:n,name:n,rowId:x,mode:u,cm:l,iCol:e}),f=re.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},l.formoptions||{}),h=parseInt(f.rowpos,10)||C+1,m=parseInt(2*(parseInt(f.colpos,10)||1),10);if("_empty"===x&&p.defaultValue&&(r=re.isFunction(p.defaultValue)?p.defaultValue.call(E):p.defaultValue),l.edittype||(l.edittype="text"),j.autoEncodeOnEdit&&(r=oe.oldDecodePostedData(r)),o=oe.createEl.call(E,l.edittype,p,r,!1,re.extend({},oe.ajaxOptions,j.ajaxSelectOptions||{})),(T.checkOnSubmit||T.checkOnUpdate)&&(T._savedData[n]=r),re(o).addClass("FormElement"),-1<re.inArray(l.edittype,["text","textarea","checkbox","password","select"])&&re(o).addClass(de.call(E,"dialog.dataField")),i=_.find("tr[data-rowpos="+h+"]"),f.rowabove){var v=re("<tr><td class='contentinfo' colspan='"+2*D+"'>"+f.rowcontent+"</td></tr>");_.append(v),v[0].rp=h}0===i.length&&(i=re("<tr data-rowpos='"+h+"'></tr>").addClass("FormData").attr("id","tr_"+n),re(i).append(S),_.append(i),i[0].rp=h);var g=re("td:eq("+(m-2)+")",i[0]),b=re("td:eq("+(m-1)+")",i[0]);g.html(void 0===f.label?j.colNames[e]:f.label||"&#160;");var y=b[ve(b.html())?"html":"append"](f.elmprefix);if(y.append(o).append(f.elmsuffix),"INPUT"===o.tagName.toUpperCase()&&l.createColumnIndex&&p.generateDatalist){var w=O.jqGrid("generateDatalistFromColumnIndex",l.name);null!=w&&0<w.length&&(re(o).attr("list","dl_"+o.id),y.append(w.attr("id","dl_"+o.id)))}s?(g.addClass(I),b.addClass(I),re(o).prop("readonly",!0),re(o).prop("disabled",!0)):c&&re(o).prop("readonly",!0),"custom"===l.edittype&&re.isFunction(p.custom_value)&&p.custom_value.call(E,re("#"+le(n),A),"set",r),oe.bindEv.call(E,o,p),a&&g.add(b).css("visibility","hidden"),k[C]=e,C++}}),me(_),0<C){var a=re("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*D-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+q+"_id' value='"+x+"'/></td></tr>");a[0].rp=C+999,_.append(a),(T.checkOnSubmit||T.checkOnUpdate)&&(T._savedData[q+"_id"]=x)}}(ae,_,o);var R=pe.call(E,B,"",se(n,T.prevIcon),"","left"),M=pe.call(E,P,"",se(n,T.nextIcon),"","right"),z=pe.call(E,"sData",T.bSubmit),V=pe.call(E,"cData",T.bCancel),L="<div class='"+de.call(E,"dialog.footer")+"'><table class='EditTable' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+de.call(E,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+j.direction+"'>"+(N?M+R:R+M)+"</td><td class='EditButton EditButton-"+j.direction+"'>"+z+"&#160;"+V+"</td></tr>";if(L+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(T.bottominfo||"&#160;")+"</td></tr>",L+="</tbody></table></div>",0<l){var U=[];re.each(re(_)[0].rows,function(e,t){U[e]=t}),U.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),re.each(U,function(e,t){re("tbody",_).append(t)})}T.gbox=r;var H=!1;!0===T.closeOnEscape&&(T.closeOnEscape=!1,H=!0);var Q=re("<div></div>").append(re("<div class='"+de.call(E,"dialog.body")+"'></div>").append(b)).append(L);if(oe.createModal.call(E,a,Q,T,j.gView,re(r)[0]),T.topinfo&&re(".tinfo",D).show(),T.bottominfo&&re(".binfo",C).show(),L=Q=null,re(i).keydown(function(e){var t,a,i=(e.target.tagName||"").toUpperCase();if(!0===re(A).data("disabled"))return!1;if(13===e.which&&"TEXTAREA"!==i){if(a=(t=re(C).find(":focus")).attr("id"),0<t.length&&0<=re.inArray(a,["pData","nData","cData"]))return t.trigger("click"),!1;if(!0===T.savekey[0]&&13===T.savekey[1])return re("#sData",C).trigger("click"),!1}if(!0===T.savekey[0]&&e.which===T.savekey[1]&&"TEXTAREA"!==i)return re("#sData",C).trigger("click"),!1;if(27===e.which)return Z()&&H&&k(),!1;if(!0===T.navkeys[0]){if("_empty"===re("#id_g",D).val())return!0;if(e.which===T.navkeys[1])return re("#pData",C).trigger("click"),!1;if(e.which===T.navkeys[2])return re("#nData",C).trigger("click"),!1}}),T.checkOnUpdate&&(re("a.ui-jqdialog-titlebar-close span",i).removeClass("jqmClose"),re("a.ui-jqdialog-titlebar-close",i).off("click").click(function(){return Z()&&k(),!1})),fe(re("#sData",C),T.saveicon,n),fe(re("#cData",C),T.closeicon,n),T.checkOnSubmit||T.checkOnUpdate){z=pe.call(E,"sNew",T.bYes),M=pe.call(E,"nNew",T.bNo),V=pe.call(E,"cNew",T.bExit);var K=T.zIndex||999;K++,re("<div class='"+T.overlayClass+" jqgrid-overlay confirm' style='z-index:"+K+";display:none;'>&#160;</div><div class='"+de.call(E,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(K+1)+"'>"+T.saveData+"<br/><br/>"+z+M+V+"</div>").insertAfter(A),re("#sNew",i).click(function(){return J(),re(A).data("disabled",!1),re(".confirm",i).hide(),!1}),re("#nNew",i).click(function(){return re(".confirm",i).hide(),re(A).data("disabled",!1),setTimeout(function(){re(A).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),re("#cNew",i).click(function(){return re(".confirm",i).hide(),re(A).data("disabled",!1),k(),!1})}d("onInitializeForm",re(A),w),"_empty"!==ae&&T.viewPagerButtons?re("#pData,#nData",C).show():re("#pData,#nData",C).hide(),d("beforeShowForm",re(A),w),re(i).data("onClose",T.onClose),oe.viewModal.call(E,i,{gbox:r,jqm:T.jqModal,overlay:T.overlay,modal:T.modal,overlayClass:T.overlayClass,toTop:T.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),m||re("."+le(T.overlayClass)).click(function(){return Z()&&k(),!1}),re(".fm-button",i).hover(function(){re(this).addClass(p)},function(){re(this).removeClass(p)}),re("#sData",C).click(function(){return y={},re("#FormError",D).hide(),Y(),"_empty"===y[q+"_id"]?J():!0===T.checkOnSubmit&&$(y,T._savedData)?(re(A).data("disabled",!0),re(".confirm",i).show()):J(),!1}),re("#cData",C).click(function(){return Z()&&k(),!1}),re("#nData",C).click(function(){if(!Z())return!1;re("#FormError",D).hide();var e=te();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!d("onclickPgButtons","next",re(A),e[1][e[0]]))return!1;X(e[1][e[0]+1],A),x.call(O,e[1][e[0]+1]),d("afterclickPgButtons","next",re(A),e[1][e[0]+1]),ee(e[0]+1,e)}return!1}),re("#pData",C).click(function(){if(!Z())return!1;re("#FormError",D).hide();var e=te();if(-1!==e[0]&&e[1][e[0]-1]){if(!d("onclickPgButtons","prev",re(A),e[1][e[0]]))return!1;if(ce(re("#"+le(e[1][e[0]-1])),I))return!1;X(e[1][e[0]-1],A),x.call(O,e[1][e[0]-1]),d("afterclickPgButtons","prev",re(A),e[1][e[0]-1]),ee(e[0]-1,e)}return!1}),d("afterShowForm",re(A),w);var W=te();ee(W[0],W)}}function Y(){return re(D+" > tbody > tr > td .FormElement").each(function(){var e,t,a=re(".customelement",this),i=a.length?a.attr("name"):this.name,r=c[i],o=void 0!==r&&G[r]||{},l=o.editoptions||{};if(a.length&&re.isFunction(l.custom_value)){try{if(y[i]=l.custom_value.call(E,re("#"+le(i),D),"get"),void 0===y[i])throw"e1"}catch(e){"e1"===e?oe.info_dialog.call(E,u,"function 'custom_value' "+T.msg.novalue,T.bClose):oe.info_dialog.call(E,u,e.message,T.bClose)}return!0}switch(t=re(this)[0].type){case"checkbox":var n="string"==typeof l.value?l.value.split(":"):["Yes","No"];y[i]=re(this).is(":checked")?n[0]:n[1];break;case"select-one":y[i]=re("option:selected",this).val();break;case"select-multiple":y[i]=re(this).val(),y[i]=y[i]?y[i].join(","):"";var d=[];re("option:selected",this).each(function(e,t){d[e]=re(t).text()});break;case"date":y[i]=re(this).val(),3===String(y[i]).split("-").length&&(e=(o.formatoptions||{}).newformat||s.call(O,"formatter.date.newformat"),y[i]=oe.parseDate.call(O[0],"Y-m-d",y[i],e));break;default:void 0!==t&&re.inArray(t,T.skipPostTypes)<0&&(y[i]=re(this).val())}}),!0}function X(e,t){var a,i,r,o,l,n=0;(T.checkOnSubmit||T.checkOnUpdate)&&(T._savedData={},T._savedData[q+"_id"]=e);var d=j.colModel;if("_empty"===e)return re(d).each(function(){a=this.name,r=re.extend({},this.editoptions||{}),(i=re("#"+le(a),t))&&i.length&&null!==i[0]&&(o="","custom"===this.edittype&&re.isFunction(r.custom_value)?r.custom_value.call(E,i,"set",o):r.defaultValue?(o=re.isFunction(r.defaultValue)?r.defaultValue.call(E):r.defaultValue,"checkbox"===i[0].type?(l=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(i[0].checked=!0,i[0].defaultChecked=!0,i[0].value=o):(i[0].checked=!1,i[0].defaultChecked=!1):i.val(o)):"checkbox"===i[0].type?(i[0].checked=!1,i[0].defaultChecked=!1,o=re(i).data("offval")):i[0].type&&"select"===i[0].type.substr(0,6)?i[0].selectedIndex=0:i.val(o),(!0===T.checkOnSubmit||T.checkOnUpdate)&&(T._savedData[a]=o))}),void re("#id_g",t).val(e);var s=ne.getInd.call(O,e,!0);s&&(re(s.cells).filter("td[role=gridcell]").each(function(r){var i;if("cb"!==(a=d[r].name)&&"subgrid"!==a&&"rn"!==a&&!0===d[r].editable){try{i=re.unformat.call(E,re(this),{rowId:e,colModel:d[r]},r)}catch(e){i="textarea"===d[r].edittype?re(this).text():re(this).html()}switch(j.autoEncodeOnEdit&&(i=oe.oldDecodePostedData(i)),(!0===T.checkOnSubmit||T.checkOnUpdate)&&(T._savedData[a]=i),a="#"+le(a),d[r].edittype){case"password":case"text":case"button":case"image":case"textarea":ve(i)&&(i=""),re(a,t).val(i);break;case"select":var o=i.split(",");o=re.map(o,function(e){return re.trim(e)}),re(a+" option",t).each(function(){var e,t=this,a=re(t),i=re.trim(a.val());if(d[r].editoptions.multiple||o[0]!==i?d[r].editoptions.multiple&&-1<(e=re.inArray(i,o))?(o.splice(e,1),t.selected=!0):t.selected=!1:(o.splice(0,1),t.selected=!0),0===o.length)return!1}),0<o.length&&re(a+" option",t).each(function(){var e,t=re(this),a=re.trim(t.text());if(d[r].editoptions.multiple||re.trim(i)!==a&&o[0]!==a?d[r].editoptions.multiple&&-1<(e=re.inArray(a,o))&&(o.splice(e,1),this.selected=!0):(o.splice(0,1),this.selected=!0),0===o.length)return!1});break;case"checkbox":i=String(i),i=d[r].editoptions&&d[r].editoptions.value?d[r].editoptions.value.split(":")[0]===i:(i=i.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==i,re(a,t).prop({checked:i,defaultChecked:i});break;case"custom":try{if(!d[r].editoptions||!re.isFunction(d[r].editoptions.custom_value))throw"e1";d[r].editoptions.custom_value.call(E,re(a,t),"set",i)}catch(e){"e1"===e?oe.info_dialog.call(E,u,"function 'custom_value' "+T.msg.nodefined,T.bClose):oe.info_dialog.call(E,u,e.message,T.bClose)}}n++}}),0<n&&re("#id_g",D).val(e))}function J(){var o,l,e,n,t,a,i,r,d,s=[!0,"",""],c=s,u={},p=j.prmNames,f=ne.getInd.call(O,ae),h=!1===f?null:E.rows[f],m=O.triggerHandler("jqGridAddEditBeforeCheckValues",[y,re(A),w]);for(e in m&&"object"==typeof m&&(y=m),f=!1===f?-1:f,re.isFunction(T.beforeCheckValues)&&(m=T.beforeCheckValues.call(E,y,re(A),w))&&"object"==typeof m&&(y=m),y)if(y.hasOwnProperty(e)&&(r=j.iColByName[e],null!=(c=oe.checkValues.call(E,y[e],e,void 0,void 0,{oldValue:"_empty"===ae?null:ne.getCell.call(O,ae,r),newValue:y[e],cmName:e,rowid:ae,cm:G[r],iCol:r,iRow:f,tr:h,td:null==h?null:h.cells[r],mode:"_empty"===ae?"addForm":"editForm"}))&&!0!==c||(c=s),!1===c[0]))break;if(d=T.url||j.editurl,re.each(G,function(e,t){var a=t.name;y.hasOwnProperty(a)&&("date"!==t.formatter||null!=t.formatoptions&&!0===t.formatoptions.sendFormatted||(y[a]=re.unformat.date.call(E,y[a],t)),"clientArray"!==d&&t.editoptions&&!0===t.editoptions.NullIfEmpty&&""===y[a]&&(y[a]="null"))}),c[0]&&(void 0===(u=O.triggerHandler("jqGridAddEditClickSubmit",[T,y,w]))&&re.isFunction(T.onclickSubmit)&&(u=T.onclickSubmit.call(E,T,y,w)||{}),null!=(c=O.triggerHandler("jqGridAddEditBeforeSubmit",[y,re(A),w]))&&!0!==c||(c=s),c[0]&&re.isFunction(T.beforeSubmit)&&(null!=(c=T.beforeSubmit.call(E,y,re(A),w))&&!0!==c||(c=s))),c[0]&&!T.processing){if(T.processing=!0,re("#sData",C).addClass(F),a=T.url||j.editurl,l=p.oper,o="clientArray"===a&&!1!==j.keyName?j.keyName:p.id,y[l]="_empty"===re.trim(y[q+"_id"])?p.addoper:p.editoper,y[l]!==p.addoper?y[o]=y[q+"_id"]:void 0===y[o]&&(y[o]=y[q+"_id"]),delete y[q+"_id"],y=re.extend(y,T.editData,u),!0===j.treeGrid){if(y[l]===p.addoper){n=j.selrow;var v="adjacency"===j.treeGridModel?j.treeReader.parent_id_field:"parent_id";y[v]=n}for(t in j.treeReader)if(j.treeReader.hasOwnProperty(t)&&(i=j.treeReader[t],y.hasOwnProperty(i))){if(y[l]===p.addoper&&"parent_id_field"===t)continue;delete y[i]}}y[o]=oe.stripPref(j.idPrefix,y[o]),j.autoEncodeOnEdit&&re.each(y,function(e,t){re.isFunction(t)||(y[e]=oe.oldEncodePostedData(t))});var g=re.extend({url:re.isFunction(a)?a.call(E,y[o],w,y,T):a,type:re.isFunction(T.mtype)?T.mtype.call(E,w,T,y[o],y):T.mtype,data:oe.serializeFeedback.call(E,re.isFunction(T.serializeEditData)?T.serializeEditData:j.serializeEditData,"jqGridAddEditSerializeEditData",y),complete:function(e,t){if(O.jqGrid("progressBar",{method:"hide",loadtype:T.saveui}),re("#sData",C).removeClass(F),y[o]=re("#id_g",D).val(),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(c[0]=!1,c[1]=O.triggerHandler("jqGridAddEditErrorTextFormat",[e,w]),re.isFunction(T.errorTextFormat)?c[1]=T.errorTextFormat.call(E,e,w):c[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(null!=(c=O.triggerHandler("jqGridAddEditAfterSubmit",[e,y,w]))&&!0!==c||(c=s),c[0]&&re.isFunction(T.afterSubmit)&&(null!=(c=T.afterSubmit.call(E,e,y,w))&&!0!==c||(c=s))),!1===c[0])re("#FormError>td",D).html(c[1]),re("#FormError",D).show();else{j.autoEncodeOnEdit&&re.each(y,function(e,t){y[e]=oe.oldDecodePostedData(t)});var a,i=[re.extend({},T.reloadGridOptions||{})];if(y[l]===p.addoper?(c[2]||(c[2]=oe.randId()),null==y[o]||"_empty"===y[o]||y[l]===p.addoper?y[o]=c[2]:c[2]=y[o],T.reloadAfterSubmit?O.trigger("reloadGrid",i):!0===j.treeGrid?ne.addChildNode.call(O,c[2],n,y):ne.addRowData.call(O,c[2],y,T.addedrow),T.closeAfterAdd?(!0!==j.treeGrid&&x.call(O,c[2]),k()):T.clearAfterAdd&&X("_empty",A)):(T.reloadAfterSubmit?(O.trigger("reloadGrid",i),T.closeAfterEdit||setTimeout(function(){x.call(O,y[o])},1e3)):!0===j.treeGrid?ne.setTreeRow.call(O,y[o],y):ne.setRowData.call(O,y[o],y),T.closeAfterEdit&&k()),re.isFunction(T.afterComplete)){var r=e;setTimeout(function(){O.triggerHandler("jqGridAddEditAfterComplete",[r,y,re(A),w]),T.afterComplete.call(E,r,y,re(A),w),r=null},50)}if(T.checkOnSubmit||T.checkOnUpdate)if(re(A).data("disabled",!1),"_empty"!==T._savedData[q+"_id"])for(a in T._savedData)T._savedData.hasOwnProperty(a)&&y[a]&&(T._savedData[a]=y[a])}T.processing=!1;try{re(A).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch(e){}}},oe.ajaxOptions,T.ajaxEditOptions);if(g.url||T.useDataProxy||(re.isFunction(j.dataProxy)?T.useDataProxy=!0:(c[0]=!1,c[1]+=" "+oe.errors.nourl)),c[0])if(O.jqGrid("progressBar",{method:"show",loadtype:T.saveui,htmlcontent:T.savetext}),T.useDataProxy){var b=j.dataProxy.call(E,g,"set_"+q);void 0===b&&(b=[!0,""]),!1===b[0]?(c[0]=!1,c[1]=b[1]||"Error deleting the selected row!"):(g.data.oper===p.addoper&&T.closeAfterAdd&&k(),g.data.oper===p.editoper&&T.closeAfterEdit&&k())}else"clientArray"===g.url?(T.reloadAfterSubmit=!1,y=g.data,g.complete({status:200,statusText:""},"")):re.ajax(g)}!1===c[0]&&(re("#FormError>td",D).html(c[1]),re("#FormError",D).show())}function $(e,t){var a,i=!1;for(a in e)if(e.hasOwnProperty(a)&&String(e[a])!==String(t[a])){i=!0;break}return i}function Z(){var e=!0;return re("#FormError",D).hide(),T.checkOnUpdate&&(y={},Y(),$(y,T._savedData)&&(re(A).data("disabled",!0),re(".confirm",i).show(),e=!1)),e}function ee(e,t){var a=t[1].length-1;0===e?re("#pData",C).addClass(I):void 0!==t[1][e-1]&&ce(re("#"+le(t[1][e-1])),I)?re("#pData",C).addClass(I):re("#pData",C).removeClass(I),e===a?re("#nData",C).addClass(I):void 0!==t[1][e+1]&&ce(re("#"+le(t[1][e+1])),I)?re("#nData",C).addClass(I):re("#nData",C).removeClass(I)}function te(){var e=ne.getDataIDs.call(O),t=re("#id_g",D).val();return[re.inArray(t,e),e]}})},viewGridRow:function(R,M){return this.each(function(){var k=this,F=re(k),_=k.p;if(k.grid&&null!=_&&R){var e=_.id,S=re.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},ne.getGridRes.call(F,"view"),oe.view||{},_.formViewing||{},M||{}),i="#ViewGrid_"+le(e),o="#ViewTbl_"+le(e),r=o+"_2",t="ViewGrid_"+e,a="ViewTbl_"+e,l=S.commonIconClass,n={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,resizeAlso:t},d="#"+le(n.themodal),s=_.gBox,E=_.colModel,c=1,u=0,p=function(){var e=re.makeArray(arguments);return e.unshift(""),e.unshift("View"),e.unshift(S),ue.apply(k,e)},f=function(){oe.hideModal(d,{gb:s,jqm:S.jqModal,onClose:S.onClose,removemodal:S.removemodal})},h=he.call(k,"hover"),m=he.call(k,"disabled"),v=isNaN(S.dataheight)?S.dataheight:S.dataheight+"px",g=isNaN(S.datawidth)?S.datawidth:S.datawidth+"px",b=re("<div class='"+de.call(k,"dialog.body")+"'><form name='FormPost' id='"+t+"' class='FormGrid' style='width:"+g+";overflow:auto;position:relative;height:"+v+";'></form></div>"),y=b.children("form.FormGrid"),w=re("<table id='"+a+"' class='EditTable'><tbody></tbody></table>");if(re(d).remove(),re(E).each(function(){var e=this.formoptions;c=Math.max(c,e&&e.colpos||0),u=Math.max(u,e&&e.rowpos||0)}),y.append(w),p("beforeInitData",y)){!function(e,t,s){var c,u,p,f,a,h,m,v,g=0,b=[],y=ne.getInd.call(F,e),w=de.call(k,"dialog.viewData"),x=re(t),D=de.call(k,"dialog.viewLabel"),i=String(S.labelswidth)+(!S.labelswidth||isNaN(S.labelswidth)?"":"px"),r="<td class='"+de.call(k,"dialog.viewCellLabel","CaptionTD form-view-label")+(i?"' style='width:"+i+";":"")+"'>&#160;</td><td class='"+de.call(k,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",C="",o=["integer","number","currency"],l=0,n=0;for(a=0;a<s;a++)C+=r;if(re(E).each(function(){var e=this;(u=(!e.editrules||!0!==e.editrules.edithidden)&&!0===e.hidden)||"right"!==e.align||(e.formatter&&-1!==re.inArray(e.formatter,o)?l=Math.max(l,parseInt(e.width,10)):n=Math.max(n,parseInt(e.width,10)))}),h=0!==l?l:0!==n?n:0,re(E).each(function(e){var t=this;if(c=t.name,m=!1,u=(!t.editrules||!0!==t.editrules.edithidden)&&!0===t.hidden,v="boolean"!=typeof t.viewable||t.viewable,"cb"!==c&&"subgrid"!==c&&"rn"!==c&&v){f=!1===y?"":oe.getDataFieldOfCell.call(k,k.rows[y],e).html(),m="right"===t.align&&0!==h;var a=re.extend({},{rowabove:!1,rowcontent:""},t.formoptions||{}),i=parseInt(a.rowpos,10)||g+1,r=parseInt(2*(parseInt(a.colpos,10)||1),10);if(a.rowabove){var o=re("<tr><td class='contentinfo' colspan='"+2*s+"'>"+a.rowcontent+"</td></tr>");x.append(o),o[0].rp=i}0===(p=x.find("tr[data-rowpos="+i+"]")).length&&((p=re("<tr data-rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+c)).append(C),x.append(p),p[0].rp=i);var l=void 0===a.label?_.colNames[e]:a.label,n=re("td:eq("+(r-1)+")",p[0]),d=re("td:eq("+(r-2)+")",p[0]);d.html("<label for='"+c+"'"+(D?" class='"+D+"'>":">")+(l||"&nbsp;")+"</label>"),n[ve(n.html())?"html":"append"]("<span id='"+c+"'"+(w?" class='"+w+"'>":">")+(f||"&nbsp;")+"</span>").attr("id","v_"+c),m&&re("td:eq("+(r-1)+") span",p[0]).css({"text-align":"right",width:h+"px"}),u&&d.add(n).css("visibility","hidden"),b[g]=e,g++}}),me(x),0<g){var d=re("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*s-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");d[0].rp=g+99,x.append(d)}}(R,w,c);var x="rtl"===_.direction,D=x?"nData":"pData",C=x?"pData":"nData",O=pe.call(k,D,"",se(l,S.prevIcon),"","left"),j=pe.call(k,C,"",se(l,S.nextIcon),"","right"),q=pe.call(k,"cData",S.bClose);if(0<u){var T=[];re.each(re(w)[0].rows,function(e,t){T[e]=t}),T.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),re.each(T,function(e,t){re("tbody",w).append(t)})}S.gbox=s;var A=re("<div></div>").append(b).append("<div class='"+de.call(k,"dialog.footer")+"'><table border='0' class='EditTable' id='"+a+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+_.direction+"' width='"+(S.labelswidth||"auto")+"'>"+(x?j+O:O+j)+"</td><td class='EditButton EditButton-"+_.direction+"'>"+q+"</td></tr></tbody></table></div>");oe.createModal.call(k,n,A,S,_.gView,re(_.gView)[0]),S.viewPagerButtons||re("#pData, #nData",r).hide(),A=null,re(d).keydown(function(e){var t,a;if(!0===re(i).data("disabled"))return!1;if(13===e.which&&(a=(t=re(r).find(":focus")).attr("id"),0<t.length&&0<=re.inArray(a,["pData","nData","cData"])))return t.trigger("click"),!1;if(27===e.which)return S.closeOnEscape&&f(),!1;if(!0===S.navkeys[0]){if(e.which===S.navkeys[1])return re("#pData",r).trigger("click"),!1;if(e.which===S.navkeys[2])return re("#nData",r).trigger("click"),!1}}),fe(re("#cData",r),S.closeicon,l),p("beforeShowForm",re(i)),oe.viewModal.call(k,d,{gbox:s,jqm:S.jqModal,overlay:S.overlay,toTop:S.toTop,modal:S.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),re(".fm-button:not(."+m.split(" ").join(".")+")",r).hover(function(){re(this).addClass(h)},function(){re(this).removeClass(h)}),I(),re("#cData",r).click(function(){return f(),!1}),re("#nData",r).click(function(){re("#FormError",o).hide();var e=P();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!p("onclickPgButtons","next",re(i),e[1][e[0]]))return!1;N(e[1][e[0]+1]),ne.setSelection.call(F,e[1][e[0]+1]),p("afterclickPgButtons","next",re(i),e[1][e[0]+1]),B(e[0]+1,e)}return I(),!1}),re("#pData",r).click(function(){re("#FormError",o).hide();var e=P();if(-1!==e[0]&&e[1][e[0]-1]){if(!p("onclickPgButtons","prev",re(i),e[1][e[0]]))return!1;N(e[1][e[0]-1]),ne.setSelection.call(F,e[1][e[0]-1]),p("afterclickPgButtons","prev",re(i),e[1][e[0]-1]),B(e[0]-1,e)}return I(),!1});var G=P();B(G[0],G)}}function I(){!0!==S.closeOnEscape&&!0!==S.navkeys[0]||setTimeout(function(){re("#cData").focus()},0)}function N(e){var t,a,i=0,r=ne.getInd.call(F,e,!0);r&&(re("td",r).each(function(e){a=E[e],"cb"!==(t=a.name)&&"subgrid"!==t&&"rn"!==t&&(t=le("v_"+t),re("#"+t+" span",o).html(oe.getDataFieldOfCell.call(k,r,e).html()),i++)}),0<i&&re("#id_g",o).val(e))}function B(e,t){var a=t[1].length-1;0===e?re("#pData",r).addClass(m):void 0!==t[1][e-1]&&ce(re("#"+le(t[1][e-1])),m)?re("#pData",r).addClass(m):re("#pData",r).removeClass(m),e===a?re("#nData",r).addClass(m):void 0!==t[1][e+1]&&ce(re("#"+le(t[1][e+1])),m)?re("#nData",r).addClass(m):re("#nData",r).removeClass(m)}function P(){var e=ne.getDataIDs.call(F),t=re("#id_g",o).val();return[re.inArray(t,e),e]}})},delGridRow:function(k,F){return this.each(function(){var s=this,c=s.p,u=re(s);if(s.grid&&null!=c&&k){var p,f,h,m,v=c.id,g=re.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},idSeparator:",",onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1,delui:"disable",deltext:ne.getGridRes.call(u,"defaults.deltext")||"Deleting..."},ne.getGridRes.call(u,"del"),oe.del||{},c.formDeleting||{},F||{}),e="DelTbl_"+v,b="#DelTbl_"+le(v),t={themodal:"delmod"+v,modalhead:"delhd"+v,modalcontent:"delcnt"+v,resizeAlso:e},y="#"+le(t.themodal),w=c.gBox,a=g.commonIconClass,x=function(){var e=re.makeArray(arguments);return e.unshift(""),e.unshift("Delete"),e.unshift(g),ue.apply(s,e)},i=he.call(s,"hover"),D=he.call(s,"active"),r=he.call(s,"error");if(re.isArray(k)||(k=[String(k)]),void 0!==re(y)[0]){if(!x("beforeInitData",re(b)))return;re("#DelData>td",b).text(k.join(g.idSeparator)).data("rowids",k),re("#DelError",b).hide(),!0===g.processing&&(g.processing=!1,re("#dData",b).removeClass(D)),x("beforeShowForm",re(b)),oe.viewModal.call(s,y,{gbox:w,jqm:g.jqModal,jqM:!1,overlay:g.overlay,toTop:g.toTop,modal:g.modal}),x("afterShowForm",re(b))}else{var o=isNaN(g.dataheight)?g.dataheight:g.dataheight+"px",l=isNaN(g.datawidth)?g.datawidth:g.datawidth+"px",n="<div class='"+de.call(s,"dialog.body")+"'><div id='"+e+"' class='formdata' style='width:"+l+";overflow:auto;position:relative;height:"+o+";'>";n+="<table class='DelTable'><tbody>",n+="<tr id='DelError' style='display:none'><td class='"+r+"'></td></tr>",n+="<tr id='DelData' style='display:none'><td >"+k.join(g.idSeparator)+"</td></tr>",n+="<tr><td class='delmsg'>"+g.msg+"</td></tr>",n+="</tbody></table></div></div>";var d=pe.call(s,"dData",g.bSubmit),C=pe.call(s,"eData",g.bCancel);if(n+="<div class='"+de.call(s,"dialog.footer")+"'><table class='EditTable' id='"+e+"_2'><tbody><tr><td><hr class='"+de.call(s,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+c.direction+"'>"+d+"&#160;"+C+"</td></tr></tbody></table></div>",g.gbox=w,oe.createModal.call(s,t,n,g,c.gView,re(c.gView)[0]),re("#DelData>td",b).data("rowids",k),!x("beforeInitData",re(n)))return;re(".fm-button",b+"_2").hover(function(){re(this).addClass(i)},function(){re(this).removeClass(i)}),fe(re("#dData",b+"_2"),g.delicon,a),fe(re("#eData",b+"_2"),g.cancelicon,a),re("#dData",b+"_2").click(function(){var e,i=[!0,""],t=re("#DelData>td",b),r=t.text(),o=t.data("rowids"),a={};if(re.isFunction(g.onclickSubmit)&&(a=g.onclickSubmit.call(s,g,r,o)||{}),re.isFunction(g.beforeSubmit)&&(i=g.beforeSubmit.call(s,r,o)||i),i[0]&&!g.processing){if(g.processing=!0,h=c.prmNames,p=re.extend({},g.delData,a),m=h.oper,p[m]=h.deloper,f=h.id,!(r=o.slice()).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=oe.stripPref(c.idPrefix,r[e]));p[f]=r.join(g.idSeparator),re(this).addClass(D);var l=g.url||c.editurl,n=re.extend({url:re.isFunction(l)?l.call(s,p[f],p,g,o):l,type:g.mtype,data:re.isFunction(g.serializeDelData)?g.serializeDelData.call(s,p,o):p,complete:function(e,t){var a;if(u.jqGrid("progressBar",{method:"hide",loadtype:g.delui}),re("#dData",b+"_2").removeClass(D),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(i[0]=!1,re.isFunction(g.errorTextFormat)?i[1]=g.errorTextFormat.call(s,e):i[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):re.isFunction(g.afterSubmit)&&(i=g.afterSubmit.call(s,e,p,o)||[!0]),!1===i[0])re("#DelError>td",b).html(i[1]),re("#DelError",b).show();else{if("local"===c.datatype||!0===c.treeGrid||!g.reloadAfterSubmit)if(!0===c.treeGrid)try{ne.delTreeNode.call(u,o[0])}catch(e){}else for(o=o.slice(),a=0;a<o.length;a++)ne.delRowData.call(u,o[a]);g.reloadAfterSubmit&&u.trigger("reloadGrid",[re.extend({},g.reloadGridOptions||{})]),setTimeout(function(){x("afterComplete",e,r,re(b),o)},50)}g.processing=!1,i[0]&&oe.hideModal(y,{gb:w,jqm:g.jqModal,onClose:g.onClose,removemodal:g.removemodal})}},oe.ajaxOptions,g.ajaxDelOptions);if(n.url||g.useDataProxy||(re.isFunction(c.dataProxy)?g.useDataProxy=!0:(i[0]=!1,i[1]+=" "+oe.errors.nourl)),i[0])if(u.jqGrid("progressBar",{method:"show",loadtype:g.delui,htmlcontent:g.deltext}),g.useDataProxy){var d=c.dataProxy.call(s,n,"del_"+v);void 0===d&&(d=[!0,""]),!1===d[0]?(i[0]=!1,i[1]=d[1]||"Error deleting the selected row!"):oe.hideModal(y,{gb:w,jqm:g.jqModal,onClose:g.onClose,removemodal:g.removemodal})}else"clientArray"===n.url?(p=n.data,n.complete({status:200,statusText:""},"")):re.ajax(n)}return!1===i[0]&&(re("#DelError>td",b).html(i[1]),re("#DelError",b).show()),!1}),re("#eData",b+"_2").click(function(){return oe.hideModal(y,{gb:w,jqm:g.jqModal,onClose:g.onClose,removemodal:g.removemodal}),!1}),x("beforeShowForm",re(b)),oe.viewModal.call(s,y,{gbox:w,jqm:g.jqModal,overlay:g.overlay,toTop:g.toTop,modal:g.modal}),x("afterShowForm",re(b))}!0===g.closeOnEscape&&setTimeout(function(){re(".ui-jqdialog-titlebar-close","#"+le(t.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(B,P,R,M,z,V,L){return"object"==typeof B&&(L=V,V=z,z=M,M=R,R=P,P=B,B=void 0),M=M||{},R=R||{},L=L||{},z=z||{},V=V||{},this.each(function(){var l=this,n=l.p,d=re(l);if(l.grid&&null!=n&&!(l.nav&&0<re(B).find(".navtable").length)){var o=n.id,s=re.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},ne.getGridRes.call(d,"nav"),oe.nav||{},n.navOptions||{},P||{});s.position=s.position||("rtl"===n.direction?"right":"left");var e,t,c,a=n.idSel,u=n.gBox,p=s.commonIconClass,f={themodal:"alertmod_"+o,modalhead:"alerthd_"+o,modalcontent:"alertcnt_"+o},r=function(){var e=H.documentElement,t=U,a=1024,i=768,r=d.closest(".ui-jqgrid").offset();void 0===re("#"+le(f.themodal))[0]&&(s.alerttop||s.alertleft||(void 0!==t.innerWidth?(a=t.innerWidth,i=t.innerHeight):null!=e&&void 0!==e.clientWidth&&0!==e.clientWidth&&(a=e.clientWidth,i=e.clientHeight),a=a/2-parseInt(s.alertwidth,10)/2-r.left+(void 0!==t.pageXOffset?t.pageXOffset:(e||H.body.parentNode||H.body).scrollLeft),i=i/2-25-r.top+(void 0!==t.pageYOffset?t.pageYOffset:(e||H.body.parentNode||H.body).scrollTop)),oe.createModal.call(l,f,"<div class='"+de.call(l,"dialog.body")+"'><div>"+s.alerttext+"</div></div>",{gbox:u,jqModal:s.jqModal,drag:!0,resize:!0,caption:s.alertcap,top:null!=s.alerttop?s.alerttop:i,left:null!=s.alertleft?s.alertleft:a,width:s.alertwidth,height:s.alertheight,closeOnEscape:s.closeOnEscape,zIndex:s.alertzIndex,removemodal:s.removemodal},n.gView,re(u)[0],!1)),oe.viewModal.call(l,"#"+le(f.themodal),{gbox:u,toTop:s.alertToTop,jqm:s.jqModal});var o=re("#"+le(f.modalhead)).find(".ui-jqdialog-titlebar-close");o.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){o.focus()},50)},i=function(e){var t;if(13===e.which&&0<(t=re(this).find(".ui-pg-button").filter(":focus")).length){var a=t[0].id,i=a.substr(0,0<re(this).closest(".ui-jqgrid-toppager").length?a.length-o.length-5:a.length-o.length-1)+"mod"+n.id,r=re(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(re.inArray(i,r)<0)return t.trigger("click"),!1}},h=he.call(l,"hover"),m=he.call(l,"disabled"),v=de.call(l,"navButton","ui-pg-button");if(l.grid){l.modalAlert=r,void 0===B&&(n.pager?(B=n.pager,n.toppager&&(s.cloneToTop=!0)):n.toppager&&(B=n.toppager));var g,b,y,w,x,D,C,k=1,F=["left","center","right"],_="<div class='"+de.call(l,"navButton","ui-pg-button "+he.call(l,"disabled"))+"'><span class='ui-separator'></span></div>",S=function(){ce(this,m)||re(this).addClass(h)},E=function(){re(this).removeClass(h)},O=function(){return ce(this,m)||(re.isFunction(s.addfunc)?s.addfunc.call(l,M):ne.editGridRow.call(d,"new",M)),!1},j=function(e,t,a){if(!ce(this,m)){var i=n.selrow;i?re.isFunction(e)?e.call(l,i,a):ne[t].call(d,i,a):r()}return!1},q=function(){return j.call(this,s.editfunc,"editGridRow",R)},T=function(){return j.call(this,s.viewfunc,"viewGridRow",L)},A=function(){var e;return ce(this,m)||(n.multiselect?0===(e=n.selarrrow).length&&(e=null):e=n.selrow,e?re.isFunction(s.delfunc)?s.delfunc.call(l,e,z):ne.delGridRow.call(d,e,z):r()),!1},G=function(){return ce(this,m)||(re.isFunction(s.searchfunc)?s.searchfunc.call(l,V):ne.searchGrid.call(d,V)),!1},I=function(){if(!ce(this,m)){re.isFunction(s.beforeRefresh)&&s.beforeRefresh.call(l),n.search=!1,n.resetsearch=!0;try{if("currentfilter"!==s.refreshstate){n.postData.filters="";try{re("#fbox_"+a).jqFilter("resetFilter")}catch(e){}re.isFunction(l.clearToolbar)&&l.clearToolbar(!1)}}catch(e){}switch(s.refreshstate){case"firstpage":d.trigger("reloadGrid",[re.extend({},s.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":d.trigger("reloadGrid",[re.extend({},s.reloadGridOptions||{},{current:!0})])}re.isFunction(s.afterRefresh)&&s.afterRefresh.call(l)}return!1},N=function(e,t,a){var i=re("<div class='"+v+"' tabindex='0' role='button'></div>"),r=s[e+"icon"],o=re.trim(s[e+"text"]);return i.append("<div class='ui-pg-div'><span class='"+(s.iconsOverText?se("ui-pg-button-icon-over-text",p,r):se(p,r))+"'></span>"+(o?"<span class='ui-pg-button-text"+(s.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+o+"</span>":"")+"</div>"),re(c).append(i),i.attr({title:s[e+"title"]||"",id:t||e+"_"+w}).click(a).hover(S,E),i};for(s.cloneToTop&&n.toppager&&(k=2),g=0;g<k;g++){if(c=re("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===n.direction?"right":"left")+";table-layout:auto;'></div>"),0===g?(w=o,(y=B)===n.toppager&&(w+="_top",k=1)):(y=n.toppager,w=o+"_top"),s.add&&N("add",M.id,O),s.edit&&N("edit",R.id,q),s.view&&N("view",L.id,T),s.del&&N("del",z.id,A),(s.add||s.edit||s.del||s.view)&&re(c).append(_),s.search&&(b=N("search",V.id,G),V.showOnLoad&&!0===V.showOnLoad&&re(b,c).click()),s.refresh&&N("refresh","",I),t=re(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",re("body").append("<div id='testpg2' class='"+de.call(l,"gBox","ui-jqgrid")+"' style='font-size:"+t+";visibility:hidden;' ></div>"),e=re(c).clone().appendTo("#testpg2").width(),re("#testpg2").remove(),re(y+"_"+s.position,y).append(c),s.hideEmptyPagerParts)for(x=0;x<F.length;x++)F[x]!==s.position&&(0===(C=re(y+"_"+F[x],y)).length||0===C[0].childNodes.length?C.hide():1===C[0].childNodes.length&&(D=C[0].firstChild,!re(D).is("table.ui-pg-table")||0!==D.rows&&0!==D.rows[0].cells.length||C.hide()));n._nvtd&&(e>n._nvtd[0]&&(re(y+"_"+s.position,y).width(e),n._nvtd[0]=e),n._nvtd[1]=e),l.nav=!0,c.on("keydown.jqGrid",i)}d.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(c,u){return"object"==typeof c&&(u=c,c=void 0),this.each(function(){var t=this,e=t.p;if(t.grid){var a=re.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},ne.getGridRes.call(re(t),"nav"),oe.nav||{},e.navOptions||{},u||{}),i=a.id,r=he.call(t,"hover"),o=he.call(t,"disabled"),l=de.call(t,"navButton","ui-pg-button");if(void 0===c)if(e.pager){if(ne.navButtonAdd.call(re(t),e.pager,a),!e.toppager)return;c=e.toppager,i&&(i+="_top")}else e.toppager&&(c=e.toppager);"string"==typeof c&&0!==c.indexOf("#")&&(c="#"+le(c));var n=re(".navtable",c),d=a.commonIconClass;if(0<n.length){if(i&&0<n.find("#"+le(i)).length)return;var s=re("<div tabindex='0' role='button'></div>");"NONE"===a.buttonicon.toString().toUpperCase()?re(s).addClass(l).append("<div class='ui-pg-div'>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"):re(s).addClass(l).append("<div class='ui-pg-div'><span class='"+(a.iconsOverText?se("ui-pg-button-icon-over-text",d,a.buttonicon):se(d,a.buttonicon))+"'></span>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"),i&&re(s).attr("id",i),"first"===a.position&&0<n.children("div.ui-pg-button").length?n.children("div.ui-pg-button").first().before(s):n.append(s),re(s,n).attr("title",a.title||"").click(function(e){return ce(this,o)||re.isFunction(a.onClickButton)&&a.onClickButton.call(t,a,e),!1}).hover(function(){ce(this,o)||re(this).addClass(r)},function(){re(this).removeClass(r)}),re(t).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(r,o){return o=re.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},o||{}),this.each(function(){if(this.grid){var e=this.p,t=de.call(this,"navButton","ui-pg-button "+he.call(this,"disabled"));if(void 0===r)if(e.pager){if(ne.navSeparatorAdd.call(re(this),e.pager,o),!e.toppager)return;r=e.toppager}else e.toppager&&(r=e.toppager);"string"==typeof r&&0!==r.indexOf("#")&&(r="#"+le(r));var a=re(".navtable",r);if(0<a.length){var i="<div class='"+t+"'><span class='"+o.sepclass+"'></span>"+o.sepcontent+"</div>";"first"===o.position?0===a.children("div.ui-pg-button").length?a.append(i):a.children("div.ui-pg-button").first().before(i):a.append(i)}}})},GridToForm:function(o,l){return this.each(function(){var e,t,a,i;if(this.grid){var r=ne.getRowData.call(re(this),o);if(r)for(e in r)if(r.hasOwnProperty(e))if((t=re("[name="+le(e)+"]",l)).is("input:radio")||t.is("input:checkbox"))for(a=0;a<t.length;a++)(i=re(t[a])).prop("checked",i.val()===String(r[e]));else t.val(ve(r[e])?"":r[e])}})},FormToGrid:function(t,i,r,o){return this.each(function(){if(this.grid){r||(r="set"),o||(o="first");var e=re(i).serializeArray(),a={};re.each(e,function(e,t){a[t.name]=t.value}),"add"===r?ne.addRowData.call(re(this),t,a,o):"set"===r&&ne.setRowData.call(re(this),t,a)}})}})});
//# sourceMappingURL=grid.formedit.js.map